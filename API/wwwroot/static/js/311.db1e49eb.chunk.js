"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[311],{4949:function(e,t,l){l.d(t,{Z:function(){return o}});var n=l(1413),r=l(1134),s=l(184),a="border-x-2 border-x-slate-200 h-full bg-slate-500 flex flex-row items-center",i="font-Montserrat resize-none font-thin text-2xl text-white placeholder:text-gray-300 placeholder:font-Oswald pb-2 pt-3 px-5 w-full h-full block bg-transparent focus-within:outline-none",c="h-auto font-Oswald text-lg leading-none w-full font-thin px-5 py-0 text-gray-600";function o(e){var t=(0,r.bc)((0,n.Z)((0,n.Z)({},e),{},{defaultValue:""})),l=t.fieldState,o=t.field;return(0,s.jsxs)("div",{className:"\n      ".concat(e.fullWidth?"w-full":"w-full max-w-sm","\n      ").concat(l.error?"border-x-red-500":"border-x-white","  \n      ").concat(a),children:[(0,s.jsx)("textarea",(0,n.Z)((0,n.Z)({className:i,"aria-label":e.label,type:e.type},e),o)),l.error&&(0,s.jsx)("p",{className:c,children:l.error.message})]})}},2990:function(e,t,l){l.d(t,{Z:function(){return o}});var n=l(1413),r=l(1134),s=l(184),a=" border-x-2 border-x-slate-200 bg-slate-500 flex flex-row items-center ",i=" font-Montserrat font-thin text-2xl text-white placeholder:capitalize placeholder:text-gray-300 placeholder:opacity-50 placeholder:font-Oswald pb-2 pt-3 px-5 w-full h-auto block bg-transparent focus-within:outline-none",c=" h-auto font-Oswald text-xl leading-none w-full text-left font-thin px-5 py-0 text-red-200 ";function o(e){var t=(0,r.bc)((0,n.Z)((0,n.Z)({},e),{},{defaultValue:""})),l=t.fieldState,o=t.field;return(0,s.jsxs)("div",{className:" ".concat(e.fullWidth?"w-full":"w-full max-w-sm "," ").concat(l.error?"border-r-red-500":"border-x-white "," ").concat(a),children:[(0,s.jsx)("input",(0,n.Z)((0,n.Z)({className:"".concat(i," autofill:bg-yellow-200 "),"aria-label":e.label,type:e.type},e),o)),l.error&&(0,s.jsx)("p",{className:c,children:l.error.message})]})}},7546:function(e,t,l){l.d(t,{Z:function(){return g}});var n=l(1413),r=l(5861),s=l(885),a=l(7757),i=l.n(a),c=l(2791),o=l(1134),u=l(260),d=l(3453),f=l(6474),x=l(1690),h=l(4949),p=l(2990),m=l(2982);var w=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"}))}));var j=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))})),b=l(184);function v(e){var t=e.isEdit,l=e.projectId,n=(0,c.useState)([]),a=(0,s.Z)(n,2),d=a[0],f=a[1],x=(0,c.useState)(!1),h=(0,s.Z)(x,2),v=h[0],g=h[1],N=(0,c.useState)(!1),y=(0,s.Z)(N,2),Z=(y[0],y[1]),k=(0,c.useState)([]),I=(0,s.Z)(k,2),O=I[0],S=I[1],R=(0,c.useState)([]),M=(0,s.Z)(R,2),P=M[0],C=M[1],E=(0,c.useState)([]),L=(0,s.Z)(E,2),z=L[0],A=L[1],q=(0,o.cI)({mode:"all"}),U=q.control,D=q.handleSubmit,T=q.reset,V=(0,o.Dq)({control:U,name:"members"}),W=V.fields,B=V.append,H=V.remove;(0,c.useEffect)((function(){v||(Z(!0),u.Z.Account.listAll().then((function(e){f(e),g(!0)})).catch((function(e){return console.log(e)})).finally((function(){return Z(!1)})))}),[v]);var G=(0,c.useCallback)((function(e){Z(!0),u.Z.Projects.listMembers(e).then((function(t){var l=t.map((function(t){return{userId:t.userId,username:t.userName,title:t.title,projectId:e,isLeader:t.isLeader,role:t.role}})),n=t.map((function(e){return e.userId}));S(t),C(n),T({members:l})})).catch((function(e){return console.log(e)})).finally((function(){return Z(!1)}))}),[T]);(0,c.useEffect)((function(){l&&v&&G(l)}),[G,l,v]);function F(){return(F=(0,r.Z)(i().mark((function e(n){var r,s,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(r=n.members.map((function(e){return{userId:e.userId,role:e.role,projectId:l,isLeader:e.isLeader}})),!t){e.next=50;break}if(s=r.filter((function(e){return!O.map((function(e){return e.userId})).includes(e.userId)})),console.log(s),!(s.length>0)){e.next=19;break}return e.prev=7,e.next=10,u.Z.Members.createRange(l,s);case 10:console.log("Adding Members:",s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(e.t0);case 16:return e.prev=16,s=[],e.finish(16);case 19:if(!((a=r.filter((function(e){return O.map((function(e){return e.userId})).includes(e.userId)}))).length>0)){e.next=37;break}if(c=[],a.forEach((function(e){var t=O.find((function(t){return t.userId===e.userId}));e.title!==t.title&&c.push(e)})),console.log("items to update: ",c),!(c.length>0)){e.next=37;break}return e.prev=25,e.next=28,u.Z.Members.updateRange(l,c);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(25),console.log(e.t1);case 33:return e.prev=33,a=[],c=[],e.finish(33);case 37:if(!(z.length>0)){e.next=47;break}return e.prev=38,console.log(z),e.next=42,u.Z.Members.deleteRange(l,z);case 42:e.next=47;break;case 44:e.prev=44,e.t2=e.catch(38),console.log(e.t2);case 47:G(l),e.next=58;break;case 50:return e.prev=50,e.next=53,u.Z.Members.createRange(l,r);case 53:e.next=58;break;case 55:e.prev=55,e.t3=e.catch(50),console.log(e.t3);case 58:case"end":return e.stop()}}),e,null,[[7,13,16,19],[25,30,33,37],[38,44],[50,55]])})))).apply(this,arguments)}if(v&&0===d.length)return(0,b.jsx)("p",{children:"no users"});var J="list-none flex flex-col flex-wrap gap-2",K="relative bg-slate-600 text-white px-3 rounded-sm flex flex-row justify-start items-center w-full h-auto",Q="font-Oswald font-thin text-2xl";return(0,b.jsx)("div",{className:"w-full h-full bg-slate-400 overflow-hidden py-10",children:(0,b.jsxs)("div",{className:"w-full container mx-auto flex flex-row ",children:[(0,b.jsxs)("div",{className:" max-w-lg w-full",children:[(0,b.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4",children:"Available Users"}),(0,b.jsx)("ul",{className:J,children:d.map((function(e){return(0,b.jsxs)("li",{className:"".concat(K," py-2 pl-5 pr-10"),children:[(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("p",{className:"".concat(Q," w-full"),children:e.displayName}),(0,b.jsx)("p",{className:" font-Montserrat font-thin text-gray-300 uppercase",children:e.title})]}),(t=e.id,P.some((function(e){return e===t}))?(0,b.jsx)("p",{className:" font-Oswald font-thin text-lg text-gray-300",children:"Added"}):(0,b.jsx)("button",{type:"button",title:"add member",onClick:function(){return function(e){B({userId:e.id,username:e.displayName,projectId:l,isLeader:!1,role:""}),C([].concat((0,m.Z)(P),[e.id]))}(e)},className:"",children:(0,b.jsx)(w,{className:"h-6 w-6"})}))]},e.id);var t}))})]}),(0,b.jsxs)("form",{onSubmit:D((function(e){return F.apply(this,arguments)})),className:"w-full pl-10",children:[(0,b.jsxs)("div",{className:" w-full flex flex-row justify-between items-center  ",children:[(0,b.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4",children:"Project Members"}),(0,b.jsxs)("div",{className:"flex flex-row gap-x-2",children:[t&&l&&z.length>0&&(0,b.jsx)("input",{className:"cursor-pointer border-slate-800 border-2 text-black py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"button",value:"Reset",onClick:function(){return G(l)}}),(0,b.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:t?"Update Members":"Add Members"})]})]}),(0,b.jsx)("ul",{className:"list-none flex flex-col flex-wrap gap-2",children:W.map((function(e,l){return(0,b.jsxs)("li",{className:"relative bg-slate-600 text-white px-3 rounded-sm flex flex-row justify-start items-center w-auto h-auto",children:[(0,b.jsx)("p",{className:"font-Oswald font-thin text-2xl leading-loose px-2 max-w-[22rem] w-full",children:(0,b.jsx)("span",{children:e.username})}),(0,b.jsx)(p.Z,{control:U,type:"text",name:"members.".concat(l,".role"),label:"Assigned Role",placeholder:"Assigned Role",rules:{required:"Role is required"},fullWidth:!0}),(0,b.jsx)("button",{type:"button",title:"remove member",className:"ml-auto w-auto h-full px-5 ",onClick:function(){return function(e,l){H(e);var n=P.filter((function(e){return e!==l}));t&&A([].concat((0,m.Z)(z),[l])),C(n)}(l,e.userId)},children:(0,b.jsx)(j,{className:"h-6 w-6 mx-2"})})]},e.id)}))})]})]})})}function g(e){var t=e.project,l=e.handleClose,a=(0,c.useState)(null),m=(0,s.Z)(a,2),w=m[0],j=m[1],g=!!t,N=(0,o.cI)({mode:"all"}),y=N.control,Z=N.watch,k=N.handleSubmit,I=N.reset,O=N.formState,S=O.isSubmitting,R=O.isDirty,M=Z("file",null),P=(0,f.TL)();function C(){return(C=(0,r.Z)(i().mark((function e(l){var r,s,a,c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,n.Z)({id:null!==(r=null===t||void 0===t?void 0:t.id)&&void 0!==r?r:0},l),a=t&&(t.title!==s.title||t.description!==s.description||null!==s.file),console.log(a),e.prev=3,!g||!a){e.next=9;break}return e.next=7,u.Z.Projects.update(s);case 7:c=e.sent,P((0,d.ty)({id:t.id,changes:(0,n.Z)({},c)}));case 9:if(g){e.next=15;break}return e.next=12,u.Z.Projects.create(s);case 12:o=e.sent,P((0,d.a0)(o)),j(o.id);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0);case 20:return e.prev=20,e.finish(20);case 22:case"end":return e.stop()}}),e,null,[[3,17,20,22]])})))).apply(this,arguments)}return(0,c.useEffect)((function(){if(t&&(j(t.id),!M&&!R)){var e={title:t.title,description:t.description};I(e,{keepTouched:!0})}return function(){M&&URL.revokeObjectURL(M.preview)}}),[I,M,R,t]),(0,b.jsx)("div",{className:"w-screen min-h-screen h-full py-16 bg-slate-600 flex   ",children:(0,b.jsxs)("div",{className:"flex-auto my-auto mx-auto",children:[(0,b.jsx)("div",{className:"container mx-auto text-white py-5 border-b-2 border-b-white",children:(0,b.jsx)("p",{className:" font-Oswald text-5xl",children:S?"Pleas wait":g?"Edit Project":"New Project"})}),(0,b.jsxs)("div",{className:"my-auto h-full flex-auto",children:[(0,b.jsx)("div",{className:"container mx-auto pt-16 text-white",children:(0,b.jsxs)("form",{onSubmit:k((function(e){return C.apply(this,arguments)})),children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 w-full gap-10",children:[(0,b.jsxs)("div",{className:" w-full flex flex-col h-full",children:[(0,b.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4",children:"Project Info"}),(0,b.jsxs)("div",{className:" flex flex-col gap-y-5",children:[(0,b.jsx)(p.Z,{control:y,name:"title",label:"Title",placeholder:"Title",rules:{required:"Title is required"},fullWidth:!0}),(0,b.jsx)(h.Z,{name:"description",placeholder:"Description",label:"Description",fullWidth:!0,rows:4,control:y,rules:{required:"Description is required"}})]})]}),(0,b.jsxs)("div",{className:"w-full flex flex-col h-full",children:[(0,b.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4 flex-initial",children:"Project Image"}),(0,b.jsx)("div",{className:"h-auto border-x-2 px-5 border-x-white text-white bg-slate-500 flex-auto",children:(0,b.jsx)(x.Z,{control:y,name:"file"})})]}),(0,b.jsxs)("div",{className:"w-full flex flex-col h-full",children:[(0,b.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4",children:"Image Preview"}),(0,b.jsx)("div",{className:"flex flex-row h-full w-full border-x-2 px-5 border-x-white text-white bg-slate-500",children:(0,b.jsx)("div",{className:" mx-auto flex items-center justify-center",children:M?(0,b.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:M.preview,alt:"preview"}):(0,b.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:null===t||void 0===t?void 0:t.photo,alt:null===t||void 0===t?void 0:t.title})})})]})]}),(0,b.jsxs)("div",{className:"flex flex-row gap-x-2 mx-auto w-full justify-center py-10",children:[(0,b.jsx)("input",{className:"cursor-pointer border-slate-500 border-2 text-slate-300 py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"button",value:"Cancel",onClick:function(){return l()}}),(0,b.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:g?"Update Project":"Create Project"})]})]})}),(0,b.jsx)("div",{className:" drop-shadow-md",children:w&&(0,b.jsx)(v,{projectId:w,isEdit:g})})]})]})})}},5311:function(e,t,l){l.r(t),l.d(t,{default:function(){return j}});var n=l(885),r=l(6437),s=l(2791),a=l(6871),i=l(260),c=l(6823),o=l(7546),u=l(6474),d=l(184),f=(0,s.lazy)((function(){return l.e(552).then(l.bind(l,2552))})),x=(0,s.lazy)((function(){return l.e(716).then(l.bind(l,5716))})),h=(0,s.lazy)((function(){return l.e(38).then(l.bind(l,3038))})),p=(0,s.lazy)((function(){return l.e(852).then(l.bind(l,2852))})),m=(0,s.lazy)((function(){return l.e(880).then(l.bind(l,7880))})),w=(0,s.lazy)((function(){return l.e(258).then(l.bind(l,2258))}));function j(){var e=(0,u.CG)((function(e){return e.account})).user,t=(0,a.UO)().slug,l=(0,s.useState)(void 0),j=(0,n.Z)(l,2),b=j[0],v=j[1],g=(0,s.useState)(!1),N=(0,n.Z)(g,2),y=N[0],Z=N[1],k=(0,s.useState)(!1),I=(0,n.Z)(k,2),O=I[0],S=I[1],R=(0,s.useState)(!1),M=(0,n.Z)(R,2),P=M[0],C=M[1];return(0,s.useEffect)((function(){e&&b&&S(e.roles.includes("Admin")||b.isLeader)}),[b,e]),(0,s.useEffect)((function(){return Z(!0),t&&i.Z.Projects.details(t).then((function(e){v(e)})).catch((function(e){return console.log(e)})).finally((function(){return Z(!1)})),function(){v(void 0)}}),[t]),y?(0,d.jsx)(c.Z,{message:"Loading Project, please wait..."}):b?P?(0,d.jsx)(o.Z,{project:b,handleClose:function(){return C(!1)}}):(0,d.jsx)("div",{className:"h-full min-h-screen w-screen bg-slate-300 pb-10 pt-20  flex",children:(0,d.jsx)("div",{className:"container mx-auto flex flex-col rounded-md overflow-hidden flex-auto",children:(0,d.jsxs)("div",{className:"flex-auto w-full flex flex-row h-full",children:[(0,d.jsxs)("div",{className:"relative py-5 w-1/3 bg-slate-700 rounded-md overflow-hidden text-white flex flex-col",children:[O&&(0,d.jsx)("div",{className:"absolute top-0 right-0 w-full flex justify-end p-1 ",children:(0,d.jsx)("button",{title:"edit members",className:" ml-auto font-Montserrat text-sm uppercase h-12 w-12  py-1 px-2 text-white rounded-md",type:"button",onClick:function(){return C((function(e){return!e}))},children:(0,d.jsx)(r.Z,{className:"h-8 w-8"})})}),(0,d.jsx)("div",{className:"h-1/3",children:(0,d.jsx)(f,{project:b})}),(0,d.jsx)("div",{className:"h-1/3",children:(0,d.jsx)(x,{project:b})}),(0,d.jsx)("div",{className:"h-1/3",children:(0,d.jsx)(p,{projectId:b.id})})]}),(0,d.jsxs)("div",{className:" relative w-2/3 px-5",children:[(0,d.jsx)("div",{className:"h-1/3 ",children:(0,d.jsx)(h,{projectId:b.id,projectSlug:b.slug,isPermitted:O})}),(0,d.jsx)("div",{className:"h-1/3  py-5",children:(0,d.jsx)(m,{projectId:b.id,projectSlug:b.slug,isPermitted:O})}),(0,d.jsx)("div",{className:"h-1/3 ",children:(0,d.jsx)(w,{projectId:b.id,projectSlug:b.slug,isPermitted:O})})]})]})})}):(0,d.jsx)("div",{className:"py-20 w-screen h-screen bg-slate-300 flex items-center justify-center",children:(0,d.jsx)("p",{className:" font-Montserrat text-xl",children:"Cant find Project"})})}},6437:function(e,t,l){var n=l(2791);var r=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),n.createElement("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"}))}));t.Z=r}}]);
//# sourceMappingURL=311.db1e49eb.chunk.js.map