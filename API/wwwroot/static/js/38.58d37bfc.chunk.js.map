{"version":3,"file":"static/js/38.58d37bfc.chunk.js","mappings":"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","sources":["app/components/Phases/PhaseForm.tsx","app/components/projects/projectDetails/ProjectPhases.tsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { FieldValues, useForm } from \"react-hook-form\";\nimport agent from \"../../api/agent\";\nimport { ProjectPhase } from \"../../models/phase\";\nimport { projectSelectors } from \"../../slices/projectSlice\";\nimport { useAppSelector } from \"../../store/configureStore\";\nimport AppTextArea from \"../common/TextArea\";\nimport AppTextInput from \"../common/TextInput\";\n\ninterface Props {\n  projectId: string;\n  phase?: ProjectPhase | null;\n  isFullScreen?: boolean;\n  onClose: () => void;\n}\n\nexport default function PhaseForm({ projectId, phase, onClose }: Props) {\n  const isEdit = !!phase;\n  const project = useAppSelector((state) =>\n    projectSelectors.selectById(state, projectId)\n  );\n  const { control, handleSubmit, reset } = useForm({\n    mode: \"all\",\n    //resolver: yupResolver<any>(productValidation)\n  });\n\n  useEffect(() => {\n    if (phase) {\n      const item = {\n        title: phase.title,\n        description: phase.description,\n      };\n      reset(item, { keepTouched: true });\n    }\n  }, [phase, reset]);\n\n  async function handleSubmitData(data: FieldValues) {\n    const item: any = { ...data, projectId };\n\n    if (!projectId) return;\n\n    const itemChanged =\n      phase &&\n      (phase.title !== item.title || phase.description !== item.description);\n\n    try {\n      if (isEdit && itemChanged) {\n        await agent.Phases.update({\n          ...item,\n          id: phase.id,\n        });\n      }\n\n      if (!isEdit) {\n        await agent.Phases.create(projectId, item);\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      onClose();\n    }\n  }\n\n  return (\n    <div className=\"h-auto w-full flex items-center justify-center \">\n      <div className=\"  max-w-5xl  w-full\">\n        <div>\n          <div className=\"flex flex-row justify-between border-b border-b-white py-1 items-end \">\n            <p className=\"font-Oswald text-5xl uppercase\">\n              {isEdit ? \"Edit Phase\" : \"New Phase\"}\n            </p>\n            <p className=\"font-Oswald text-xl uppercase font-thin\">\n              {project?.title}\n            </p>\n          </div>\n          <form\n            className=\"py-5 flex flex-col gap-y-5\"\n            onSubmit={handleSubmit(handleSubmitData)}\n          >\n            <AppTextInput\n              name=\"title\"\n              placeholder=\"Title\"\n              label=\"Title\"\n              \n              control={control}\n              rules={{ required: \"Title is required\" }}\n            />\n\n            <AppTextArea\n              name=\"description\"\n              placeholder=\"Description\"\n              label=\"Description\"\n              \n              rows={4}\n              control={control}\n              rules={{ required: \"Description is required\" }}\n            />\n\n            <div className=\"flex flex-row gap-x-2 mx-auto w-full justify-end py-5\">\n              <input\n                className=\"cursor-pointer border-slate-500 border-2 text-slate-300 py-1 px-5 uppercase font-Oswald text-xl font-thin\"\n                type=\"button\"\n                value=\"Cancel\"\n                onClick={onClose}\n              />\n              <input\n                className=\"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin\"\n                type=\"submit\"\n                value={isEdit ? \"Update Phase\" : \"Create Phase\"}\n              />\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { lazy, useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport agent from \"../../../api/agent\";\nimport { ProjectPhase } from \"../../../models/phase\";\nimport PhaseForm from \"../../Phases/PhaseForm\";\n\nconst PhasesList = lazy(() => import(\"../../Phases/PhasesList\"));\n\ninterface Props {\n  projectId: string;\n  projectSlug: string;\n  isPermitted: boolean;\n}\n\nexport default function ProjectPhases({\n  projectId,\n  projectSlug,\n  isPermitted,\n}: Props) {\n  const [phases, setPhases] = useState<ProjectPhase[]>([]);\n  const [selectedPhase, setSelectedPhase] = useState<ProjectPhase | null>(null);\n  const [loaded, setLoaded] = useState(false);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n\n  const loadProjectPhases = useCallback(() => {\n    agent.Projects.listRecentPhases(projectId)\n      .then((response) => {\n        setPhases(response);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => setLoaded(false));\n  }, [projectId]);\n\n  useEffect(() => {\n    if (projectId && !loaded) {\n      loadProjectPhases();\n    }\n\n    return () => {\n      setPhases([]);\n    };\n  }, [loadProjectPhases, loaded, projectId]);\n\n  const handleOnClose = () => {\n    loadProjectPhases();\n    if (selectedPhase) setSelectedPhase(null);\n    setIsFormOpen(false);\n  };\n\n  function handleOnPhaseSelect(item: ProjectPhase) {\n    setSelectedPhase(item);\n    setIsFormOpen(true);\n  }\n\n  return (\n    <div className=\"relative h-full flex flex-col overflow-hidden\">\n      {!isFormOpen ? (\n        <div>\n          <div className=\"flex-initial flex flex-col lg:flex-row lg:items-end justify-between px-5 lg:px-0\">\n            <p className=\"font-Oswald text-3xl font-thin uppercase leading-loose\">\n              Recent Phases\n            </p>\n            <div className=\"flex flex-row items-end gap-x-2 self-start\">\n              {isPermitted && (\n                <button\n                  onClick={() => setIsFormOpen(true)}\n                  className=\"px-2 py-1 bg-slate-600 text-white\"\n                  type=\"button\"\n                >\n                  <p className=\"font-Oswald text-lg font-thin uppercase\">\n                    Add Phase\n                  </p>\n                </button>\n              )}\n              <Link\n                className=\"px-2 py-1 bg-slate-600 text-white\"\n                to={`/projects/${projectSlug}/phases/`}\n              >\n                <p className=\"font-Oswald text-lg font-thin uppercase\">\n                  View Phases\n                </p>\n              </Link>\n            </div>\n          </div>\n          <div className=\"flex-auto h-full w-full px-5\">\n            {phases.length > 0 ? (\n              <PhasesList\n                phases={phases}\n                onPhaseSelected={handleOnPhaseSelect}\n                isPermitted={isPermitted}\n              />\n            ) : (\n              <div className=\"h-40 w-full flex items-center justify-center\">\n                <p className=\"font-Montserrat text-xl text-gray-400\">EMPTY</p>\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n        <div className=\"w-full h-full px-5 lg:px-0\">\n          <PhaseForm\n            projectId={projectId}\n            onClose={handleOnClose}\n            phase={selectedPhase}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["PhaseForm","projectId","phase","onClose","isEdit","project","useAppSelector","state","projectSelectors","useForm","mode","control","handleSubmit","reset","data","item","itemChanged","title","description","agent","id","console","log","useEffect","keepTouched","className","onSubmit","name","placeholder","label","rules","required","rows","type","value","onClick","PhasesList","lazy","ProjectPhases","projectSlug","isPermitted","useState","phases","setPhases","selectedPhase","setSelectedPhase","loaded","setLoaded","isFormOpen","setIsFormOpen","loadProjectPhases","useCallback","then","response","catch","err","finally","to","length","onPhaseSelected"],"sourceRoot":""}