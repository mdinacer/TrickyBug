"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[709],{2397:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(184);function a(e){var t=e.title,n=e.value,a=e.fallbackValue,s=void 0===a?"Unavailable":a,l=e.isCol,i=void 0!==l&&l;return(0,r.jsxs)("p",{className:"".concat(i?"flex-col items-start":"flex-row items-center"," flex w-full justify-between font-Montserrat border-b border-b-inherit"),children:[(0,r.jsx)("span",{className:"text-xl uppercase font-Oswald font-thin min-w-[7rem]",children:t}),n?(0,r.jsx)("span",{className:"text-lg first-letter:capitalize",children:n}):(0,r.jsx)("span",{className:"text-base uppercase font-thin text-gray-500",children:s})]})}},4949:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(1413),a=n(1134),s=n(184),l="border-x-2 border-x-slate-200 h-full bg-slate-500 flex flex-row items-center",i="font-Montserrat resize-none font-thin text-2xl text-white placeholder:text-gray-300 placeholder:font-Oswald pb-2 pt-3 px-5 w-full h-full block bg-transparent focus-within:outline-none",o="h-auto font-Oswald text-xl leading-none w-full font-thin px-5 py-0 text-gray-200";function c(e){var t=(0,a.bc)((0,r.Z)((0,r.Z)({},e),{},{defaultValue:""})),n=t.fieldState,c=t.field;return(0,s.jsxs)("div",{className:"\n      ".concat(e.fullWidth?"w-full":"w-full max-w-sm","\n      ").concat(n.error?"border-x-red-500":"border-x-white","  \n      ").concat(l),children:[(0,s.jsx)("textarea",(0,r.Z)((0,r.Z)({className:i,"aria-label":e.label,type:e.type},e),c)),n.error&&(0,s.jsx)("p",{className:o,children:n.error.message})]})}},9709:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var r=n(885),a=n(2791),s=n(6871),l=n(260),i=n(5861),o=n(7757),c=n.n(o),u=n(1134),f=n(4949),d=n(184);function m(e){var t=e.ticketId,n=(0,u.cI)({mode:"all"}),r=n.control,a=n.handleSubmit;function s(){return(s=(0,i.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.Z.Comments.create(t,n).then((function(){})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)("form",{onSubmit:a((function(e){return s.apply(this,arguments)})),className:"flex flex-row",children:[(0,d.jsx)(f.Z,{rows:4,fullWidth:!0,control:r,label:"comment",placeholder:"post a comment",name:"body",rules:{required:"Comment cant be empty"}}),(0,d.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:"Post"})]})}function x(e){var t=e.commentsCount,n=void 0===t?52:t;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:" font-Oswald uppercase text-2xl",children:"Comments"}),(0,d.jsx)("p",{className:" font-Oswald text-lg uppercase font-thin",children:n<=0?"No Comments":1===n?"1 Comment":"".concat(n," comments")})]})}var p=n(8527),h=n(4522);function v(e,t){(0,h.Z)(2,arguments);var n=(0,p.Z)(e),r=(0,p.Z)(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function b(e,t){(0,h.Z)(2,arguments);var n=(0,p.Z)(e),r=(0,p.Z)(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return 12*a+s}function j(e){(0,h.Z)(1,arguments);var t=(0,p.Z)(e);return t.setHours(23,59,59,999),t}function g(e){(0,h.Z)(1,arguments);var t=(0,p.Z)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function w(e){(0,h.Z)(1,arguments);var t=(0,p.Z)(e);return j(t).getTime()===g(t).getTime()}function Z(e,t){(0,h.Z)(2,arguments);var n,r=(0,p.Z)(e),a=(0,p.Z)(t),s=v(r,a),l=Math.abs(b(r,a));if(l<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*l);var i=v(r,a)===-s;w((0,p.Z)(e))&&1===l&&1===v(e,a)&&(i=!1),n=s*(l-Number(i))}return 0===n?0:n}function y(e,t){return(0,h.Z)(2,arguments),(0,p.Z)(e).getTime()-(0,p.Z)(t).getTime()}var N={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function M(e){return e?N[e]:N.trunc}function D(e,t,n){(0,h.Z)(2,arguments);var r=y(e,t)/1e3;return M(null===n||void 0===n?void 0:n.roundingMethod)(r)}var k=n(6704);function S(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}({},e)}var O=n(4697),T=1440,C=43200;function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,h.Z)(2,arguments);var r=n.locale||k.Z;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=v(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var s,l,i=S(n);i.addSuffix=Boolean(n.addSuffix),i.comparison=a,a>0?(s=(0,p.Z)(t),l=(0,p.Z)(e)):(s=(0,p.Z)(e),l=(0,p.Z)(t));var o,c=D(l,s),u=((0,O.Z)(l)-(0,O.Z)(s))/1e3,f=Math.round((c-u)/60);if(f<2)return n.includeSeconds?c<5?r.formatDistance("lessThanXSeconds",5,i):c<10?r.formatDistance("lessThanXSeconds",10,i):c<20?r.formatDistance("lessThanXSeconds",20,i):c<40?r.formatDistance("halfAMinute",null,i):c<60?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",1,i):0===f?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",f,i);if(f<45)return r.formatDistance("xMinutes",f,i);if(f<90)return r.formatDistance("aboutXHours",1,i);if(f<T){var d=Math.round(f/60);return r.formatDistance("aboutXHours",d,i)}if(f<2520)return r.formatDistance("xDays",1,i);if(f<C){var m=Math.round(f/T);return r.formatDistance("xDays",m,i)}if(f<86400)return o=Math.round(f/C),r.formatDistance("aboutXMonths",o,i);if((o=Z(l,s))<12){var x=Math.round(f/C);return r.formatDistance("xMonths",x,i)}var b=o%12,j=Math.floor(o/12);return b<3?r.formatDistance("aboutXYears",j,i):b<9?r.formatDistance("overXYears",j,i):r.formatDistance("almostXYears",j+1,i)}function F(e){var t=e.comment;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-row justify-between w-full items-center border-b border-gray-500 mb-3",children:[(0,d.jsx)("p",{className:" font-Oswald font-thin text-lg leading-loose",children:t.author}),(0,d.jsx)("p",{className:" font-Montserrat text-xs  text-gray-700",children:X(new Date(t.creationDate),new Date,{addSuffix:!0})})]}),(0,d.jsx)("p",{className:" font-Montserrat min-w-[12rem]",children:t.body})]})}function I(e){var t=e.comments;return(0,d.jsx)("ul",{className:"flex flex-col gap-y-2 pr-5",children:t.map((function(e,t){return(0,d.jsx)("li",{className:"w-full bg-slate-100 px-10 rounded-md h-auto py-5  flex flex-col justify-start items-start",children:(0,d.jsx)(F,{comment:e})},t)}))})}function E(e){var t=e.comments,n=e.ticketId;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex flex-row justify-between items-end border-b-2 border-black pb-1 flex-initial",children:(0,d.jsx)(x,{})}),(0,d.jsx)("div",{className:"flex-auto overflow-y-scroll overflow-x-hidden py-5 my-5 ",children:(0,d.jsx)(I,{comments:t})}),(0,d.jsx)(m,{ticketId:n})]})}var P=n(6823),Y=n(9158);function z(e){var t=e.ticket;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-row justify-between items-end border-b-2 border-black pb-1",children:[(0,d.jsx)("p",{className:" font-Oswald text-4xl",children:t.project}),(0,d.jsxs)("p",{className:" font-Oswald text-lg uppercase font-thin",children:["Ticket #",t.id]})]}),(0,d.jsxs)("div",{className:"pt-5",children:[(0,d.jsx)("p",{className:" font-Oswald leading-normal font-thin text-base  uppercase",children:"Subject"}),(0,d.jsx)("p",{className:" font-Montserrat text-lg pb-3",children:t.subject}),(0,d.jsx)("p",{className:" font-Oswald leading-normal font-thin  uppercase",children:"Description"}),(0,d.jsx)("p",{className:" font-Montserrat text-base",children:t.body}),(0,d.jsxs)("p",{className:" font-Oswald uppercase text-gray-600 pt-3 text-right font-thin flex flex-row gap-x-2 justify-end",children:[(0,d.jsx)("span",{children:"Posted the"}),(0,d.jsx)("span",{children:(0,Y.Z)(new Date(t.creationDate),"EE dd MMM yy")}),(0,d.jsx)("span",{children:"by"}),(0,d.jsx)("span",{children:t.author})]})]})]})}var U=n(2397);function V(e){var t,n=e.ticket;return(0,d.jsxs)("div",{className:"flex flex-col gap-y-3 border-b-black",children:[(0,d.jsx)(U.Z,{title:"Priority",value:n.priority}),(0,d.jsx)(U.Z,{title:"Status",value:n.status}),(0,d.jsx)(U.Z,{title:"Related Phase",value:null===(t=n.phase)||void 0===t?void 0:t.title,fallbackValue:"undefined"}),n.description&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(U.Z,{title:"Occurrence",value:n.description.occurrence}),(0,d.jsx)(U.Z,{title:"Nature",value:n.description.nature}),(0,d.jsx)(U.Z,{title:"Severity",value:n.description.severity})]}),(0,d.jsx)(U.Z,{title:"Assigned member",value:n.assignedMember,fallbackValue:"Unassigned"}),(0,d.jsxs)("div",{className:"py-2 border-b-black flex flex-col gap-y-3",children:[(0,d.jsx)(U.Z,{title:"Operating system",value:n.description.operatingSystem,isCol:!0}),(0,d.jsx)(U.Z,{title:"Browser version",value:n.description.browser,isCol:!0})]}),(0,d.jsxs)("div",{className:" flex flex-row items-end  w-full justify-between font-Montserrat border-b border-b-black ",children:[(0,d.jsx)("p",{className:"text-lg uppercase font-Oswald font-thin min-w-[7rem]",children:"Screenshot"}),n.description.photo?(0,d.jsx)("button",{className:"text-lg uppercase font-Oswald font-thin",children:"View"}):(0,d.jsx)("p",{className:"text-base uppercase font-thin text-gray-500",children:"Unavailable"})]})]})}var H=n(1413);function L(){var e=(0,a.useState)(null),t=(0,r.Z)(e,2),n=t[0],s=t[1],i=(0,a.useState)([]),o=(0,r.Z)(i,2),c=o[0],u=o[1],f=(0,a.useState)(!1),d=(0,r.Z)(f,2),m=d[0],x=d[1],p=(0,a.useState)({pageNumber:1,pageSize:10}),h=(0,r.Z)(p,2),v=h[0],b=h[1],j=(0,a.useState)(null),g=(0,r.Z)(j,2),w=g[0],Z=g[1];var y=(0,a.useCallback)((function(e){var t=function(e){var t=new URLSearchParams;return t.append("pageNumber",e.pageNumber.toString()),t.append("pageSize",e.pageSize.toString()),t}(v);l.Z.Tickets.listComments(e,t).then((function(e){Z(e.metaData),u(e.items),x(!0)})).catch((function(e){return console.log(e)}))}),[v]);return(0,a.useEffect)((function(){!m&&n&&y(n)}),[m,y,n]),{comments:c,commentsLoaded:m,metaData:w,setParams:function(e){b((0,H.Z)({},e)),x(!1)},setTicketId:s,setCommentsLoaded:x}}var R=n(6474);function q(){var e=(0,s.UO)().id,t=(0,a.useState)(null),n=(0,r.Z)(t,2),i=n[0],o=n[1],c=(0,a.useState)(!1),u=(0,r.Z)(c,2),f=u[0],m=u[1],x=(0,a.useState)(!1),p=(0,r.Z)(x,2),h=p[0],v=p[1],b=(0,R.CG)((function(e){return e.ticket})).status,j=L(),g=j.comments,w=(j.metaData,j.setTicketId);return(0,a.useEffect)((function(){!e||f||h||(v(!0),l.Z.Tickets.details(parseInt(e)).then((function(e){o(e),m(!0)})).catch((function(e){return console.log(e)})).finally((function(){return v(!1)})))}),[e,f,h,i]),(0,a.useEffect)((function(){return i&&w(i.id),function(){w(null)}}),[w,i]),b.includes("pending")?(0,d.jsx)(P.Z,{message:"Loading ticket..."}):i?(0,d.jsxs)("div",{className:" min-h-screen w-full h-screen  bg-slate-600 pb-10 pt-16 flex flex-row items-center ",children:[(0,d.jsxs)("div",{className:"w-1/3 h-full flex-initial px-10 py-5 flex flex-col gap-y-5",children:[(0,d.jsx)("div",{className:" bg-slate-300 rounded-md overflow-hidden px-10 py-10",children:(0,d.jsx)(z,{ticket:i})}),(0,d.jsx)("div",{className:" bg-slate-300 rounded-md overflow-hidden px-10 py-10",children:(0,d.jsx)(V,{ticket:i})})]}),(0,d.jsx)("div",{className:"w-2/3 relative h-full flex-auto px-10 py-5 flex flex-col gap-y-5",children:(0,d.jsx)("div",{className:" bg-slate-300 flex-auto rounded-md overflow-hidden px-10 py-5 flex flex-col ",children:(0,d.jsx)(E,{ticketId:i.id,comments:g})})})]}):(0,d.jsx)("div",{children:"not found"})}}}]);
//# sourceMappingURL=709.22f6043f.chunk.js.map