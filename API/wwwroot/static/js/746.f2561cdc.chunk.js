"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[746],{1746:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(1413),i=n(5861),s=n(885),l=n(7757),a=n.n(l),c=n(2791),o=n(1134),u=n(260),d=n(3460),f=n(6474),p=n(3705),x=function e(t){var n={};for(var r in t)if("object"!==typeof t[r]||Array.isArray(t[r]))n[r]=t[r];else{var i=e(t[r]);for(var s in i)n[r+"."+s]=i[s]}return n},m=n(732),v=n(1690),h=n(4949),b=n(2990),g=n(184);function w(e){var t=e.projectId,n=e.ticketId,l=e.onClose,w=(0,f.CG)((function(e){return e.account})).isAdmin,j=(0,c.useState)(null),y=(0,s.Z)(j,2),k=y[0],N=y[1],Z=!!k,C=(0,c.useState)(null),S=(0,s.Z)(C,2),R=S[0],M=S[1],O=!!R,T=(0,c.useState)([]),I=(0,s.Z)(T,2),L=I[0],V=I[1],P=(0,o.cI)({mode:"all"}),A=P.control,B=P.watch,D=P.handleSubmit,E=P.reset,U=P.setValue,q=P.formState.isDirty,F=B("file",null),H=(0,c.useCallback)(function(){var e=(0,i.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.Projects.listMembers(t);case 3:n=e.sent,r=n.map((function(e){return{name:e.userName,value:e.userId}})),V(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),z=(0,c.useCallback)(function(){var e=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.Projects.detailsById(t);case 3:return n=e.sent,M(n),U("projectId",n.id),e.next=8,H(n.id);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[H,U]),$=(0,c.useCallback)(function(){var e=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.Tickets.details(t);case 3:n=e.sent,N(n),console.log("ticket",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);(0,c.useEffect)((function(){t&&z(t)}),[z,t]),(0,c.useEffect)((function(){n&&$(n)}),[$,n]),(0,c.useEffect)((function(){return!k||F||q||E(k),function(){F&&URL.revokeObjectURL(F.preview)}}),[q,E,k,F]);var _=function(e,t){U(e,t)};function G(){return(G=(0,i.Z)(a().mark((function e(t){var n,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return");case 2:if(n=t.file,i=t.description,s={id:k?k.id:0,subject:t.subject,body:t.body,priority:t.priority,projectId:R.id,status:t.status,assignedMemberId:t.assignedMemberId,description:i},c=(0,r.Z)((0,r.Z)({},x(s)),{},{"description.file":n}),R){e.next=7;break}return e.abrupt("return");case 7:if(e.prev=7,!Z){e.next=11;break}return e.next=11,u.Z.Tickets.update(c);case 11:if(Z){e.next=14;break}return e.next=14,u.Z.Tickets.create(c);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:return e.prev=19,l(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})))).apply(this,arguments)}return(0,g.jsx)("div",{className:"lg:fixed top-0 left-0 h-full min-h-screen w-screen bg-slate-100 z-[5] px-5 lg:px-0 flex items-center  py-20",children:(0,g.jsxs)("div",{className:"container mx-auto flex flex-col max-w-4xl",children:[(0,g.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between border-b border-b-white py-1 lg:items-end ",children:[(0,g.jsx)("p",{className:"font-Oswald text-5xl uppercase",children:Z?"Edit Ticket":"New Ticket"}),(0,g.jsx)("p",{className:"font-Oswald text-xl uppercase font-thin",children:null===R||void 0===R?void 0:R.title})]}),(0,g.jsxs)("form",{onSubmit:D((function(e){return G.apply(this,arguments)})),className:"w-full flex flex-col gap-y-5",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 text-black  lg:gap-x-10",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-y-5 py-5",children:[(0,g.jsx)(b.Z,{type:"text",control:A,label:"Ticket Title",placeholder:"Ticket Title",name:"subject",rules:{required:"Subject is required"}}),(0,g.jsx)(b.Z,{type:"text",control:A,label:"Operating System",placeholder:"Operating System",name:"description.operatingSystem"}),(0,g.jsx)(b.Z,{type:"text",control:A,label:"Browser",placeholder:"Browser",name:"description.browser"}),(0,g.jsx)(h.Z,{rows:7,type:"text",control:A,label:"Ticket Description",placeholder:"Ticket Description",name:"body",rules:{required:"Description is required"}})]}),(0,g.jsx)("div",{className:"flex flex-col gap-y-5 py-5",children:(0,g.jsxs)("div",{className:" w-full flex flex-col  gap-y-5 ",children:[Z&&(k.isAssigned||(null===R||void 0===R?void 0:R.isLeader))&&(0,g.jsx)(m.Z,{title:"Priority",items:(0,p.S)(d.Bh),onChange:function(e){return _("priority",e)},selectedValue:null===k||void 0===k?void 0:k.priority}),Z&&(k.isAssigned||(null===R||void 0===R?void 0:R.isLeader))&&(0,g.jsx)(m.Z,{title:"Status",items:(0,p.S)(d.mk),onChange:function(e){return _("status",e)},selectedValue:null===k||void 0===k?void 0:k.status}),Z&&(w||(null===R||void 0===R?void 0:R.isLeader))&&(0,g.jsx)(m.Z,{title:"Assigned Member",items:L,onChange:function(e){return _("assignedMemberId",e)},selectedValue:null===k||void 0===k?void 0:k.assignedMember}),(0,g.jsx)(m.Z,{title:"Occurrence",items:(0,p.S)(d.vH),onChange:function(e){return _("description.occurrence",e)},selectedValue:null===k||void 0===k?void 0:k.description.occurrence}),(0,g.jsx)(m.Z,{title:"Severity",items:(0,p.S)(d._8),onChange:function(e){return _("description.severity",e)},selectedValue:null===k||void 0===k?void 0:k.description.severity}),(0,g.jsx)(m.Z,{title:"Nature",items:(0,p.S)(d.$p),onChange:function(e){return _("description.nature",e)},selectedValue:null===k||void 0===k?void 0:k.description.nature})]})})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-10 lg:h-[200px]",children:[(0,g.jsx)("div",{className:"h-auto border-x-2 px-5 py-5 border-x-white text-white bg-slate-500 bg-opacity-50 flex-auto",children:(0,g.jsx)(v.Z,{control:A,name:"file"})}),(0,g.jsx)("div",{className:"flex flex-row h-full w-full border-x-2 px-5 border-x-white text-white bg-slate-500 bg-opacity-50",children:(0,g.jsx)("div",{className:" mx-auto flex items-center justify-center",children:F?(0,g.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:F.preview,alt:"preview"}):(0,g.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:null===k||void 0===k?void 0:k.description.photo,alt:null===k||void 0===k?void 0:k.subject})})})]}),(0,g.jsxs)("div",{className:"flex flex-row gap-x-0 mx-auto w-full justify-center lg:justify-end py-5",children:[(0,g.jsx)("input",{className:"cursor-pointer border-slate-800 border-2 text-slate-800 py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"button",value:"Cancel",onClick:l}),(0,g.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:Z?"Update Ticket":"Create Ticket"})]})]})]})})}},732:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(885),i=n(7845),s=n(2791),l=n(184),a="relative border-x-2 border-x-slate-200 bg-slate-200",c="pb-2 pt-3 px-5 font-Oswald font-thin inline-flex justify-between items-center w-full",o="flex flex-row items-center justify-between w-full gap-x-5 text-lg lg:text-2xl",u="text-lg lg:text-2xl text-gray-400",d="w-8 h-8 ml-2 text-inherit",f="absolute bg-white text-base z-50 drop-shadow-md list-none divide-y  divide-gray-100 rounded shadow my-4  w-full px-5",p="py-5 list-none flex flex-col gap-y-2 font-Montserrat",x="font-Montserrat text-left text-black text-lg font-thin cursor-pointer";function m(e){var t=e.title,n=e.items,m=e.onChange,v=e.selectedValue,h=(0,s.useState)(!1),b=(0,r.Z)(h,2),g=b[0],w=b[1],j=(0,s.useState)(null),y=(0,r.Z)(j,2),k=y[0],N=y[1];(0,s.useEffect)((function(){if(v&&null==k){var e=n.find((function(e){return e.name===v}));N(e||null)}}),[n,k,v]);return(0,l.jsxs)("div",{className:"\n    ".concat(v?"border-x-white":"border-x-red-500","  \n    ").concat(a),children:[(0,l.jsxs)("button",{type:"button",className:c,onClick:function(){return w((function(e){return!e}))},children:[k?(0,l.jsxs)("p",{className:o,children:[(0,l.jsxs)("span",{className:"text-gray-500  text-xl  capitalize ",children:[t," "]}),(0,l.jsx)("span",{className:"uppercase text-inherit",children:k.name})]}):(0,l.jsx)("p",{className:u,children:t}),(0,l.jsx)(i.Z,{className:d})]}),(0,l.jsx)("div",{className:"".concat(g?"block ":"hidden","  ").concat(f),id:"dropdown",children:(0,l.jsx)("ul",{className:p,"aria-labelledby":"dropdown",children:n.map((function(e){return(0,l.jsx)("li",{value:e.value,onClick:function(){return function(e){N(e),m(e.value),w(!1)}(e)},className:x,children:e.name},e.value)}))})})]})}},3460:function(e,t,n){var r,i,s,l,a;n.d(t,{vH:function(){return r},mk:function(){return i},Bh:function(){return s},_8:function(){return l},$p:function(){return a}}),function(e){e[e.Persistent=0]="Persistent",e[e.Frequent=1]="Frequent",e[e.Random=2]="Random",e[e.Rare=3]="Rare"}(r||(r={})),function(e){e[e.New=0]="New",e[e.Assigned=1]="Assigned",e[e.Open=2]="Open",e[e.Fixed=3]="Fixed",e[e.Pending=4]="Pending",e[e.Retest=5]="Retest",e[e.Verified=6]="Verified",e[e.Reopen=7]="Reopen",e[e.Closed=8]="Closed",e[e.Duplicate=9]="Duplicate",e[e.Rejected=10]="Rejected",e[e.Deferred=11]="Deferred",e[e.NotBug=12]="NotBug"}(i||(i={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High",e[e.Urgent=3]="Urgent"}(s||(s={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High",e[e.Critical=3]="Critical"}(l||(l={})),function(e){e[e.Functional=0]="Functional",e[e.Performance=1]="Performance",e[e.Usability=2]="Usability",e[e.Compatibility=3]="Compatibility",e[e.Security=4]="Security"}(a||(a={}))},3705:function(e,t,n){n.d(t,{S:function(){return i}});var r=n(885);function i(e){for(var t=[],n=0,i=Object.entries(e);n<i.length;n++){var s=(0,r.Z)(i[n],2),l=s[0],a=s[1];Number.isNaN(Number(l))&&t.push({name:l,value:a})}return t}},7845:function(e,t,n){var r=n(2791);var i=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=i}}]);
//# sourceMappingURL=746.f2561cdc.chunk.js.map