"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[546],{4949:function(e,t,l){l.d(t,{Z:function(){return c}});var r=l(1413),n=l(1134),a=l(184),s="border-x-2 border-x-slate-200 h-full bg-slate-200 flex flex-col lg:flex-row items-center",i="font-Montserrat resize-none font-thin text-base lg:text-xl text-inherit placeholder:text-gray-500 placeholder:font-Oswald pb-2 pt-3 px-5 w-full h-full block bg-transparent focus-within:outline-none",o="h-auto font-Oswald text-xl leading-none w-full font-thin px-5 py-5 lg:py-0 text-gray-200";function c(e){var t=(0,n.bc)((0,r.Z)((0,r.Z)({},e),{},{defaultValue:""})),l=t.fieldState,c=t.field;return(0,a.jsxs)("div",{className:"\n      ".concat(e.fullWidth?"w-full":"w-full max-w-sm","\n      ").concat(l.error?"border-x-red-500":"border-x-white","  \n      ").concat(s),children:[(0,a.jsx)("textarea",(0,r.Z)((0,r.Z)({className:i,"aria-label":e.label,type:e.type},e),c)),l.error&&(0,a.jsx)("p",{className:o,children:l.error.message})]})}},2990:function(e,t,l){l.d(t,{Z:function(){return c}});var r=l(1413),n=l(1134),a=l(184),s=" border-x-2 border-x-slate-200 bg-slate-200 flex flex-row items-center ",i=" font-Montserrat font-thin text-base lg:text-xl text-inherit placeholder:capitalize placeholder:text-gray-500  placeholder:font-Oswald pb-2 pt-3 px-5 w-full h-auto block bg-transparent focus-within:outline-none",o=" h-auto font-Oswald text-xl leading-none w-full text-left font-thin px-5 py-0 text-gray-200 ";function c(e){var t=(0,n.bc)((0,r.Z)((0,r.Z)({},e),{},{defaultValue:""})),l=t.fieldState,c=t.field;return(0,a.jsxs)("div",{className:" ".concat(e.fullWidth?"w-full":"w-full max-w-sm "," ").concat(l.error?"border-r-red-500":"border-x-white "," ").concat(s),children:[(0,a.jsx)("input",(0,r.Z)((0,r.Z)({className:"".concat(i," autofill:bg-yellow-200 "),"aria-label":e.label,type:e.type},e),c)),l.error&&(0,a.jsx)("p",{className:o,children:l.error.message})]})}},7546:function(e,t,l){l.d(t,{Z:function(){return N}});var r=l(1413),n=l(5861),a=l(885),s=l(7757),i=l.n(s),o=l(2791),c=l(1134),u=l(260),d=l(3453),x=l(6474),f=l(8222),p=l(1690),h=l(4949),m=l(2990),b=l(2982);var w=o.forwardRef((function(e,t){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),o.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"}))}));var g=o.forwardRef((function(e,t){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),o.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))})),v=l(184);function j(e){var t=e.isEdit,l=e.projectId,r=(0,o.useState)([]),s=(0,a.Z)(r,2),d=s[0],x=s[1],f=(0,o.useState)(!1),p=(0,a.Z)(f,2),h=p[0],j=p[1],N=(0,o.useState)(!1),y=(0,a.Z)(N,2),Z=(y[0],y[1]),k=(0,o.useState)([]),I=(0,a.Z)(k,2),O=I[0],R=I[1],S=(0,o.useState)([]),M=(0,a.Z)(S,2),C=M[0],L=M[1],P=(0,o.useState)([]),E=(0,a.Z)(P,2),A=E[0],q=E[1],D=(0,c.cI)({mode:"all"}),T=D.control,U=D.handleSubmit,W=D.reset,z=(0,c.Dq)({control:T,name:"members"}),V=z.fields,B=z.append,H=z.remove;(0,o.useEffect)((function(){h||(Z(!0),u.Z.Account.listAll().then((function(e){x(e),j(!0)})).catch((function(e){return console.log(e)})).finally((function(){return Z(!1)})))}),[h]);var F=(0,o.useCallback)((function(e){Z(!0),u.Z.Projects.listMembers(e).then((function(t){var l=t.map((function(t){return{userId:t.userId,username:t.userName,title:t.title,projectId:e,isLeader:t.isLeader,role:t.role}})),r=t.map((function(e){return e.userId}));R(t),L(r),W({members:l})})).catch((function(e){return console.log(e)})).finally((function(){return Z(!1)}))}),[W]);(0,o.useEffect)((function(){l&&h&&F(l)}),[F,l,h]);function G(){return(G=(0,n.Z)(i().mark((function e(r){var n,a,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(n=r.members.map((function(e){return{userId:e.userId,role:e.role,projectId:l,isLeader:e.isLeader}})),!t){e.next=50;break}if(a=n.filter((function(e){return!O.map((function(e){return e.userId})).includes(e.userId)})),console.log(a),!(a.length>0)){e.next=19;break}return e.prev=7,e.next=10,u.Z.Members.createRange(l,a);case 10:console.log("Adding Members:",a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),console.log(e.t0);case 16:return e.prev=16,a=[],e.finish(16);case 19:if(!((s=n.filter((function(e){return O.map((function(e){return e.userId})).includes(e.userId)}))).length>0)){e.next=37;break}if(o=[],s.forEach((function(e){var t=O.find((function(t){return t.userId===e.userId}));e.title!==t.title&&o.push(e)})),console.log("items to update: ",o),!(o.length>0)){e.next=37;break}return e.prev=25,e.next=28,u.Z.Members.updateRange(l,o);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(25),console.log(e.t1);case 33:return e.prev=33,s=[],o=[],e.finish(33);case 37:if(!(A.length>0)){e.next=47;break}return e.prev=38,console.log(A),e.next=42,u.Z.Members.deleteRange(l,A);case 42:e.next=47;break;case 44:e.prev=44,e.t2=e.catch(38),console.log(e.t2);case 47:F(l),e.next=58;break;case 50:return e.prev=50,e.next=53,u.Z.Members.createRange(l,n);case 53:e.next=58;break;case 55:e.prev=55,e.t3=e.catch(50),console.log(e.t3);case 58:case"end":return e.stop()}}),e,null,[[7,13,16,19],[25,30,33,37],[38,44],[50,55]])})))).apply(this,arguments)}if(h&&0===d.length)return(0,v.jsx)("p",{children:"no users"});var J="list-none flex flex-col flex-wrap gap-2",K="relative bg-slate-600 text-white px-3 rounded-sm flex flex-row justify-start items-center w-full h-auto",Q="font-Oswald font-thin text-2xl";return(0,v.jsx)("div",{className:"w-full h-full bg-slate-400 overflow-hidden py-10",children:(0,v.jsxs)("div",{className:"w-full lg:container mx-auto flex flex-col lg:flex-row gap-y-5 lg:gap-y-0 ",children:[(0,v.jsxs)("div",{className:" max-w-lg w-full",children:[(0,v.jsx)("p",{className:"font-Oswald text-3xl text-center lg:text-left font-thin pb-4",children:"Available Users"}),(0,v.jsx)("ul",{className:J,children:d.map((function(e){return(0,v.jsxs)("li",{className:"".concat(K," py-2 pl-5 pr-10"),children:[(0,v.jsxs)("div",{className:"w-full",children:[(0,v.jsx)("p",{className:"".concat(Q," w-full"),children:e.displayName}),(0,v.jsx)("p",{className:" font-Montserrat font-thin text-gray-300 uppercase",children:e.title})]}),(t=e.id,C.some((function(e){return e===t}))?(0,v.jsx)("p",{className:" font-Oswald font-thin text-lg text-gray-300",children:"Added"}):(0,v.jsx)("button",{type:"button",title:"add member",onClick:function(){return function(e){B({userId:e.id,username:e.displayName,projectId:l,isLeader:!1,role:""}),L([].concat((0,b.Z)(C),[e.id]))}(e)},className:"",children:(0,v.jsx)(w,{className:"h-6 w-6"})}))]},e.id);var t}))})]}),(0,v.jsxs)("form",{onSubmit:U((function(e){return G.apply(this,arguments)})),className:"w-full lg:pl-10",children:[(0,v.jsxs)("div",{className:" w-full flex flex-col lg:flex-row justify-between items-center  py-5 lg:py-0",children:[(0,v.jsx)("p",{className:"font-Oswald text-3xl  font-thin pb-4",children:"Project Members"}),(0,v.jsxs)("div",{className:"flex flex-row gap-x-2",children:[t&&l&&A.length>0&&(0,v.jsx)("input",{className:"cursor-pointer border-slate-800 border-2 text-black py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"button",value:"Reset",onClick:function(){return F(l)}}),(0,v.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:t?"Update Members":"Add Members"})]})]}),(0,v.jsx)("ul",{className:"list-none flex flex-col flex-wrap gap-2",children:V.map((function(e,l){return(0,v.jsxs)("li",{className:"relative bg-slate-600 text-white lg:px-3 rounded-sm flex flex-col lg:flex-row justify-start items-center w-auto h-auto",children:[(0,v.jsx)("p",{className:"font-Oswald font-thin text-2xl leading-loose px-2 max-w-[22rem] w-full",children:(0,v.jsx)("span",{children:e.username})}),(0,v.jsx)(m.Z,{control:T,type:"text",name:"members.".concat(l,".role"),label:"Assigned Role",placeholder:"Assigned Role",rules:{required:"Role is required"},fullWidth:!0}),(0,v.jsx)("button",{type:"button",title:"remove member",className:"lg:ml-auto w-auto h-auto p-3  lg:py-0 lg:px-5 absolute lg:relative top-0 right-0 ",onClick:function(){return function(e,l){H(e);var r=C.filter((function(e){return e!==l}));t&&q([].concat((0,b.Z)(A),[l])),L(r)}(l,e.userId)},children:(0,v.jsx)(g,{className:"h-6 w-6 mx-2"})})]},e.id)}))})]})]})})}function N(e){var t=e.project,l=e.handleClose,s=(0,o.useState)(null),b=(0,a.Z)(s,2),w=b[0],g=b[1],N=!!t,y=(0,f.Z)("(max-width: 1024px)"),Z=(0,c.cI)({mode:"all"}),k=Z.control,I=Z.watch,O=Z.handleSubmit,R=Z.reset,S=Z.formState,M=S.isSubmitting,C=S.isDirty,L=I("file",null),P=(0,x.TL)();function E(){return(E=(0,n.Z)(i().mark((function e(l){var n,a,s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,r.Z)({id:null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:0},l),s=t&&(t.title!==a.title||t.description!==a.description||null!==a.file),console.log(s),e.prev=3,!N||!s){e.next=9;break}return e.next=7,u.Z.Projects.update(a);case 7:o=e.sent,P((0,d.ty)({id:t.id,changes:(0,r.Z)({},o)}));case 9:if(N){e.next=15;break}return e.next=12,u.Z.Projects.create(a);case 12:c=e.sent,P((0,d.a0)(c)),g(c.id);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0);case 20:return e.prev=20,e.finish(20);case 22:case"end":return e.stop()}}),e,null,[[3,17,20,22]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){if(t&&(g(t.id),!L&&!C)){var e={title:t.title,description:t.description};R(e,{keepTouched:!0})}return function(){L&&URL.revokeObjectURL(L.preview)}}),[R,L,C,t]),(0,v.jsx)("div",{className:"w-screen min-h-screen h-full py-16 bg-slate-600 flex   ",children:(0,v.jsxs)("div",{className:"flex-auto my-auto mx-auto",children:[(0,v.jsx)("div",{className:"container mx-auto text-white py-5 border-b-2 border-b-white px-5 lg:px-0",children:(0,v.jsx)("p",{className:" font-Oswald text-5xl",children:M?"Please wait":N?"Edit Project":"New Project"})}),(0,v.jsxs)("div",{className:"my-auto h-full flex-auto",children:[(0,v.jsx)("div",{className:"container mx-auto pt-16 text-white",children:(0,v.jsxs)("form",{onSubmit:O((function(e){return E.apply(this,arguments)})),children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 w-full gap-10 px-5 lg:px-0",children:[(0,v.jsxs)("div",{className:" w-full flex flex-col h-full",children:[(0,v.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4",children:"Project Info"}),(0,v.jsxs)("div",{className:" flex flex-col gap-y-5",children:[(0,v.jsx)(m.Z,{control:k,name:"title",label:"Title",placeholder:"Title",rules:{required:"Title is required"},fullWidth:!y}),(0,v.jsx)(h.Z,{name:"description",placeholder:"Description",label:"Description",fullWidth:!y,rows:4,control:k,rules:{required:"Description is required"}})]})]}),(0,v.jsxs)("div",{className:"w-full flex flex-col h-full",children:[(0,v.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4 flex-initial",children:"Project Image"}),(0,v.jsx)("div",{className:"h-auto border-x-2 px-5 border-x-white text-white bg-slate-500 flex-auto",children:(0,v.jsx)(p.Z,{control:k,name:"file"})})]}),(0,v.jsxs)("div",{className:"w-full flex flex-col h-full",children:[(0,v.jsx)("p",{className:"font-Oswald text-3xl font-thin pb-4",children:"Image Preview"}),(0,v.jsx)("div",{className:"flex flex-row h-full w-full border-x-2 px-5 border-x-white text-white bg-slate-500",children:(0,v.jsx)("div",{className:" mx-auto flex items-center justify-center",children:L?(0,v.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:L.preview,alt:"preview"}):(0,v.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:null===t||void 0===t?void 0:t.photo,alt:null===t||void 0===t?void 0:t.title})})})]})]}),(0,v.jsxs)("div",{className:"flex flex-row gap-x-2 mx-auto w-full justify-center py-10",children:[(0,v.jsx)("input",{className:"cursor-pointer border-slate-500 border-2 text-slate-300 py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"button",value:"Cancel",onClick:function(){return l()}}),(0,v.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:N?"Update Project":"Create Project"})]})]})}),(0,v.jsx)("div",{className:" drop-shadow-md",children:w&&(0,v.jsx)(j,{projectId:w,isEdit:N})})]})]})})}}}]);
//# sourceMappingURL=546.6037dfd1.chunk.js.map