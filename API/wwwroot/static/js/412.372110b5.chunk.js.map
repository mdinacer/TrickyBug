{"version":3,"file":"static/js/412.372110b5.chunk.js","mappings":"iOAUe,SAASA,IACtB,IAAQC,GAASC,EAAAA,EAAAA,MAATD,KACR,GAA8BE,EAAAA,EAAAA,eAA8BC,GAA5D,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA4BH,EAAAA,EAAAA,WAAS,GAArC,eAAOI,EAAP,KAAeC,EAAf,KACA,GAA8BL,EAAAA,EAAAA,UAA0B,IAAxD,eAAOM,EAAP,KAAgBC,EAAhB,KACA,GAA8BP,EAAAA,EAAAA,WAAS,GAAvC,eAAOQ,EAAP,KAAgBC,EAAhB,KACA,GAAgDT,EAAAA,EAAAA,UAA2B,CACzEU,WAAY,KACZC,WAAY,EACZC,SAAU,KAHZ,eAAOC,EAAP,KAMMC,GANN,MAMoBC,EAAAA,EAAAA,cAAY,SAACjB,GAC/BW,GAAW,GACXO,EAAAA,EAAAA,SAAAA,QAAuBlB,GACpBmB,MAAK,SAACC,GACLf,EAAWe,MAEZC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAC3BG,SAAQ,kBAAMd,GAAW,QAC3B,MAEHe,EAAAA,EAAAA,YAAU,WAKR,OAJAf,GAAW,GACPX,GACFgB,EAAYhB,GAEP,WACLK,OAAWF,MAEZ,CAACa,EAAahB,IAEjB,IAAM2B,GAAcV,EAAAA,EAAAA,cAClB,SAACW,GACCjB,GAAW,GACX,IAAMkB,ECdL,SAA6Bd,GAChC,IAAMc,EAAS,IAAIC,gBAMnB,OALAD,EAAOE,OAAO,aAAchB,EAAiBF,WAAWmB,YACxDH,EAAOE,OAAO,WAAYhB,EAAiBD,SAASkB,YAChDjB,EAAiBH,YACjBiB,EAAOE,OAAO,aAAchB,EAAiBH,YAE1CiB,EDOUI,CAAoBlB,GACnCG,EAAAA,EAAAA,SAAAA,YAA2BU,EAAIC,GAC5BV,MAAK,SAACC,GACLX,EAAWW,MAEZC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAC3BG,SAAQ,WACPlB,GAAU,GACVI,GAAW,QAGjB,CAACI,IAmBH,OAhBAW,EAAAA,EAAAA,YAAU,WAKR,OAJItB,IAAYE,GACdqB,EAAYvB,EAAQwB,IAGf,WACLnB,EAAW,OAEZ,CAACkB,EAAarB,EAAQF,KAEzBsB,EAAAA,EAAAA,YAAU,WACJtB,GAAWW,GACbY,EAAYvB,EAAQwB,MAErB,CAACD,EAAavB,EAASW,IAEtBL,GAEA,gBAAKwB,UAAU,yEAAf,UACE,SAACC,EAAA,EAAD,CAAkBC,QAAS,yBAG5BhC,GAGH,gBAAK8B,UAAU,8DAAf,UACE,iBAAKA,UAAU,qEAAf,WACE,iBAAKA,UAAU,gGAAf,WACE,eAAIA,UAAU,2DAAd,SACG9B,EAAQiC,SAEX,cAAGH,UAAU,2CAAb,wBAUD1B,EAAQ8B,OAAS,GAChB,eAAIJ,UAAU,uCAAd,SACG1B,EAAQ+B,KAAI,SAACC,GAAD,OACX,eAAoBN,UAAU,cAA9B,UACE,iBAAKA,UAAU,uFAAf,WACE,cAAGA,UAAU,oEAAb,UACGO,EAAAA,EAAAA,GAAO,IAAIC,KAAKF,EAAOG,YAAa,eAEvC,iBAAKT,UAAU,GAAf,WACE,cAAGA,UAAU,kCAAb,SACGM,EAAOH,SAEV,cAAGH,UAAU,4BAAb,SACGM,EAAOI,kBAGZ,cAAGV,UAAU,qDAAb,SACGM,EAAOK,aAdLL,EAAOZ,UAqBpB,gBAAKM,UAAU,+CAAf,UACE,cAAGA,UAAU,0BAAb,kDA5CW,gBAAKA,UAAU,QAAf","sources":["app/pages/projects/ProjectActionsPage.tsx","app/util/queryParams.ts"],"sourcesContent":["import { format } from \"date-fns\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport agent from \"../../api/agent\";\nimport LoadingComponent from \"../../components/common/LoadingComponent\";\nimport { ProjectAction } from \"../../models/action\";\nimport { PaginationParams } from \"../../models/pagingParams\";\nimport { Project } from \"../../models/project\";\nimport { getPaginationParams } from \"../../util/queryParams\";\n\nexport default function ProjectActionsPage() {\n  const { slug } = useParams<{ slug: string }>();\n  const [project, setProject] = useState<Project | undefined>(undefined);\n  const [loaded, setLoaded] = useState(false);\n  const [actions, setActions] = useState<ProjectAction[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [paginationParams, setPaginationParams] = useState<PaginationParams>({\n    searchTerm: null,\n    pageNumber: 1,\n    pageSize: 10,\n  });\n\n  const loadProject = useCallback((slug: string) => {\n    setLoading(true);\n    agent.Projects.details(slug)\n      .then((response) => {\n        setProject(response);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    setLoading(true);\n    if (slug) {\n      loadProject(slug);\n    }\n    return () => {\n      setProject(undefined);\n    };\n  }, [loadProject, slug]);\n\n  const loadActions = useCallback(\n    (id: string) => {\n      setLoading(true);\n      const params = getPaginationParams(paginationParams);\n      agent.Projects.listActions(id, params)\n        .then((response) => {\n          setActions(response);\n        })\n        .catch((err) => console.log(err))\n        .finally(() => {\n          setLoaded(true);\n          setLoading(false);\n        });\n    },\n    [paginationParams]\n  );\n\n  useEffect(() => {\n    if (project && !loaded) {\n      loadActions(project.id);\n    }\n\n    return () => {\n      setActions([]);\n    };\n  }, [loadActions, loaded, project]);\n\n  useEffect(() => {\n    if (project && paginationParams) {\n      loadActions(project.id);\n    }\n  }, [loadActions, project, paginationParams]);\n\n  if (loading)\n    return (\n      <div className=\"py-20 w-screen h-screen bg-slate-300 flex  items-center justify-center\">\n        <LoadingComponent message={\"Loading Tickets...\"} />\n      </div>\n    );\n  if (!project) return <div className=\"py-20\">Not Found</div>;\n\n  return (\n    <div className=\"h-full min-h-screen w-screen bg-slate-300 px-5 pb-10 pt-20 \">\n      <div className=\"container mx-auto flex flex-col  w-full rounded-md overflow-hidden\">\n        <div className=\" w-full border-b-2 py-1 border-b-black flex flex-col lg:flex-row justify-between lg:items-end\">\n          <h1 className=\"flex-initial text-3xl lg:text-5xl font-Oswald  uppercase\">\n            {project.title}\n          </h1>\n          <p className=\"text-2xl font-Oswald uppercase font-thin\">Tickets</p>\n        </div>\n\n        {/* {!fromPhase && (\n          <TicketsFilters\n            params={paginationParams}\n            setParams={(value) => setPaginationParams(value)}\n          />\n        )} */}\n\n        {actions.length > 0 ? (\n          <ul className=\"list-none flex flex-col py-5 gap-y-5\">\n            {actions.map((action) => (\n              <li key={action.id} className=\"list-item  \">\n                <div className=\"flex flex-col lg:flex-row justify-start lg:items-center px-5 border-b border-b-black\">\n                  <p className=\"font-Oswald text-xl ml-auto lg:ml-0 font-thin w-full max-w-[6rem]\">\n                    {format(new Date(action.actionDate), \"dd-MM-yy\")}\n                  </p>\n                  <div className=\"\">\n                    <p className=\" font-Oswald font-thin text-2xl\">\n                      {action.title}\n                    </p>\n                    <p className=\" font-Montserrat text-xl \">\n                      {action.description}\n                    </p>\n                  </div>\n                  <p className=\"lg:ml-auto font-Oswald uppercase font-thin text-lg\">\n                    {action.author}\n                  </p>\n                </div>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <div className=\"h-20 w-full flex items-center justify-center\">\n            <p className=\"font-Montserrat text-lg\">\n              This project have no tickets\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { PaginationParams } from \"../models/pagingParams\";\nimport { TicketParams } from \"../models/ticketParams\";\n\nexport function getTicketsParams(ticketParams: TicketParams) {\n    const params = new URLSearchParams();\n    params.append(\"pageNumber\", ticketParams.pageNumber.toString());\n    params.append(\"pageSize\", ticketParams.pageSize.toString());\n    params.append(\"orderBy\", ticketParams.orderBy);\n\n    if (ticketParams.searchTerm) {\n        params.append(\"searchTerm\", ticketParams.searchTerm);\n    }\n\n    if (ticketParams.status) {\n        params.append(\"status\", ticketParams.status.toString());\n    }\n\n    if (ticketParams.priority) {\n        params.append(\"priority\", ticketParams.priority.toString());\n    }\n\n    if (ticketParams.startDate) {\n        params.append(\"startDate\", ticketParams.startDate);\n    }\n\n    if (ticketParams.endDate) {\n        params.append(\"endDate\", ticketParams.endDate);\n    }\n    return params;\n}\n\nexport function getPaginationParams(paginationParams: PaginationParams) {\n    const params = new URLSearchParams();\n    params.append(\"pageNumber\", paginationParams.pageNumber.toString());\n    params.append(\"pageSize\", paginationParams.pageSize.toString());\n    if (paginationParams.searchTerm) {\n        params.append(\"searchTerm\", paginationParams.searchTerm);\n    }\n    return params;\n}"],"names":["ProjectActionsPage","slug","useParams","useState","undefined","project","setProject","loaded","setLoaded","actions","setActions","loading","setLoading","searchTerm","pageNumber","pageSize","paginationParams","loadProject","useCallback","agent","then","response","catch","err","console","log","finally","useEffect","loadActions","id","params","URLSearchParams","append","toString","getPaginationParams","className","LoadingComponent","message","title","length","map","action","format","Date","actionDate","description","author"],"sourceRoot":""}