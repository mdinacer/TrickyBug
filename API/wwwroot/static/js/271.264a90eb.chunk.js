"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[271],{1746:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(1413),i=n(5861),l=n(885),s=n(7757),c=n.n(s),a=n(2791),o=n(1134),u=n(260),d=n(3460),f=n(3705),x=function e(t){var n={};for(var r in t)if("object"!==typeof t[r]||Array.isArray(t[r]))n[r]=t[r];else{var i=e(t[r]);for(var l in i)n[r+"."+l]=i[l]}return n},p=n(732),h=n(1690),m=n(4949),v=n(2990),b=n(184);function g(e){var t=e.projectId,n=e.ticketId,s=e.onClose,g=(0,a.useState)(null),j=(0,l.Z)(g,2),w=j[0],y=j[1],N=!!w,k=(0,a.useState)(null),Z=(0,l.Z)(k,2),C=Z[0],S=Z[1],T=!!C,R=(0,a.useState)([]),O=(0,l.Z)(R,2),M=O[0],I=O[1],P=(0,o.cI)({mode:"all"}),V=P.control,W=P.watch,E=P.handleSubmit,B=P.reset,D=P.setValue,U=P.formState.isDirty,A=W("file",null),L=(0,a.useCallback)(function(){var e=(0,i.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.Projects.listMembers(t);case 3:n=e.sent,r=n.map((function(e){return{name:e.userName,value:e.userId}})),I(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),q=(0,a.useCallback)(function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.Projects.detailsById(t);case 3:return n=e.sent,S(n),D("projectId",n.id),e.next=8,L(n.id);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[L,D]),F=(0,a.useCallback)(function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.Tickets.details(t);case 3:n=e.sent,y(n),console.log("ticket",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);(0,a.useEffect)((function(){t&&q(t)}),[q,t]),(0,a.useEffect)((function(){n&&F(n)}),[F,n]),(0,a.useEffect)((function(){return!w||A||U||B(w),function(){A&&URL.revokeObjectURL(A.preview)}}),[U,B,w,A]);var H=function(e,t){D(e,t)};function z(){return(z=(0,i.Z)(c().mark((function e(t){var n,i,l,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:if(n=t.file,i=t.description,l={id:w?w.id:0,subject:t.subject,body:t.body,priority:t.priority,projectId:C.id,status:t.status,assignedMemberId:t.assignedMemberId,description:i},a=(0,r.Z)((0,r.Z)({},x(l)),{},{"description.file":n}),C){e.next=7;break}return e.abrupt("return");case 7:if(e.prev=7,!N){e.next=11;break}return e.next=11,u.Z.Tickets.update(a);case 11:if(N){e.next=14;break}return e.next=14,u.Z.Tickets.create(a);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:return e.prev=19,s(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})))).apply(this,arguments)}return(0,b.jsx)("div",{className:"lg:fixed top-0 left-0 h-full min-h-screen w-screen bg-slate-100 z-[5] px-5 lg:px-0 flex items-center  py-20",children:(0,b.jsxs)("div",{className:"container mx-auto flex flex-col max-w-4xl",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between border-b border-b-white py-1 lg:items-end ",children:[(0,b.jsx)("p",{className:"font-Oswald text-5xl uppercase",children:N?"Edit Ticket":"New Ticket"}),(0,b.jsx)("p",{className:"font-Oswald text-xl uppercase font-thin",children:null===C||void 0===C?void 0:C.title})]}),(0,b.jsxs)("form",{onSubmit:E((function(e){return z.apply(this,arguments)})),className:"w-full flex flex-col gap-y-5",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 text-black  lg:gap-x-10",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-y-5 py-5",children:[(0,b.jsx)(v.Z,{type:"text",control:V,label:"Ticket Title",placeholder:"Ticket Title",name:"subject",fullWidth:!0,rules:{required:"Subject is required"}}),(0,b.jsx)(v.Z,{type:"text",control:V,label:"Operating System",placeholder:"Operating System",name:"description.operatingSystem",fullWidth:!0}),(0,b.jsx)(v.Z,{type:"text",control:V,label:"Browser",placeholder:"Browser",name:"description.browser",fullWidth:!0}),(0,b.jsx)(m.Z,{rows:7,type:"text",control:V,label:"Ticket Description",placeholder:"Ticket Description",name:"body",fullWidth:!0,rules:{required:"Description is required"}})]}),(0,b.jsx)("div",{className:"flex flex-col gap-y-5 py-5",children:(0,b.jsxs)("div",{className:" w-full flex flex-col  gap-y-5 ",children:[(0,b.jsx)(p.Z,{title:"Priority",fullWidth:!0,items:(0,f.S)(d.Bh),onChange:function(e){return H("priority",e)},selectedValue:null===w||void 0===w?void 0:w.priority}),N&&(0,b.jsx)(p.Z,{title:"Status",fullWidth:!0,items:(0,f.S)(d.mk),onChange:function(e){return H("status",e)},selectedValue:null===w||void 0===w?void 0:w.status}),N&&(0,b.jsx)(p.Z,{title:"Assigned Member",fullWidth:!0,items:M,onChange:function(e){return H("assignedMemberId",e)},selectedValue:null===w||void 0===w?void 0:w.assignedMember}),(0,b.jsx)(p.Z,{title:"Occurrence",fullWidth:!0,items:(0,f.S)(d.vH),onChange:function(e){return H("description.occurrence",e)},selectedValue:null===w||void 0===w?void 0:w.description.occurrence}),(0,b.jsx)(p.Z,{title:"Severity",fullWidth:!0,items:(0,f.S)(d._8),onChange:function(e){return H("description.severity",e)},selectedValue:null===w||void 0===w?void 0:w.description.severity}),(0,b.jsx)(p.Z,{title:"Nature",fullWidth:!0,items:(0,f.S)(d.$p),onChange:function(e){return H("description.nature",e)},selectedValue:null===w||void 0===w?void 0:w.description.nature})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-10 lg:h-[200px]",children:[(0,b.jsx)("div",{className:"h-auto border-x-2 px-5 py-5 border-x-white text-white bg-slate-500 bg-opacity-50 flex-auto",children:(0,b.jsx)(h.Z,{control:V,name:"file"})}),(0,b.jsx)("div",{className:"flex flex-row h-full w-full border-x-2 px-5 border-x-white text-white bg-slate-500 bg-opacity-50",children:(0,b.jsx)("div",{className:" mx-auto flex items-center justify-center",children:A?(0,b.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:A.preview,alt:"preview"}):(0,b.jsx)("img",{className:" object-auto w-auto object-center max-h-[200px]",src:null===w||void 0===w?void 0:w.description.photo,alt:null===w||void 0===w?void 0:w.subject})})})]}),(0,b.jsxs)("div",{className:"flex flex-row gap-x-0 mx-auto w-full justify-center lg:justify-end py-5",children:[(0,b.jsx)("input",{className:"cursor-pointer border-slate-800 border-2 text-slate-800 py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"button",value:"Cancel",onClick:s}),(0,b.jsx)("input",{className:"cursor-pointer bg-slate-800 text-white py-1 px-5 uppercase font-Oswald text-xl font-thin",type:"submit",value:N?"Update Ticket":"Create Ticket"})]})]})]})})}},732:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(885),i=n(7845),l=n(2791),s=n(184),c="relative border-x-2 border-x-slate-200 bg-slate-200",a="pb-2 pt-3 px-5 font-Oswald font-thin inline-flex justify-between items-center w-full",o="flex flex-row items-center justify-between w-full gap-x-5 text-lg lg:text-2xl",u="text-lg lg:text-2xl text-gray-400",d="w-8 h-8 ml-2 text-inherit",f="absolute bg-white text-base z-50 drop-shadow-md list-none divide-y  divide-gray-100 rounded shadow my-4  w-full px-5",x="py-5 list-none flex flex-col gap-y-2 font-Montserrat",p="font-Montserrat text-left text-black text-lg font-thin cursor-pointer";function h(e){var t=e.title,n=e.items,h=e.fullWidth,m=void 0!==h&&h,v=e.onChange,b=e.selectedValue,g=(0,l.useState)(!1),j=(0,r.Z)(g,2),w=j[0],y=j[1],N=(0,l.useState)(null),k=(0,r.Z)(N,2),Z=k[0],C=k[1];(0,l.useEffect)((function(){if(b&&null==Z){var e=n.find((function(e){return e.name===b}));C(e||null)}}),[n,Z,b]);return(0,s.jsxs)("div",{className:"\n    ".concat(m?"w-full":"max-w-sm w-full","\n    ").concat(b?"border-x-white":"border-x-red-500","  \n    ").concat(c),children:[(0,s.jsxs)("button",{type:"button",className:a,onClick:function(){return y((function(e){return!e}))},children:[Z?(0,s.jsxs)("p",{className:o,children:[(0,s.jsxs)("span",{className:"text-gray-500  text-xl  capitalize ",children:[t," "]}),(0,s.jsx)("span",{className:"uppercase text-inherit",children:Z.name})]}):(0,s.jsx)("p",{className:u,children:t}),(0,s.jsx)(i.Z,{className:d})]}),(0,s.jsx)("div",{className:"".concat(w?"block ":"hidden","  ").concat(f),id:"dropdown",children:(0,s.jsx)("ul",{className:x,"aria-labelledby":"dropdown",children:n.map((function(e){return(0,s.jsx)("li",{value:e.value,onClick:function(){return function(e){C(e),v(e.value),y(!1)}(e)},className:p,children:e.name},e.value)}))})})]})}},2271:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(885),i=n(2791),l=n(3504),s=n(260),c=n(1746),a=n(184),o=(0,i.lazy)((function(){return Promise.all([n.e(158),n.e(677)]).then(n.bind(n,8677))}));function u(e){var t=e.projectId,n=e.isPermitted,u=(0,i.useState)([]),d=(0,r.Z)(u,2),f=d[0],x=d[1],p=(0,i.useState)(!1),h=(0,r.Z)(p,2),m=h[0],v=h[1],b=(0,i.useState)(null),g=(0,r.Z)(b,2),j=g[0],w=g[1],y=(0,i.useState)(!1),N=(0,r.Z)(y,2),k=N[0],Z=N[1],C=(0,i.useCallback)((function(){s.Z.Projects.listRecentTickets(t).then((function(e){x(e)})).catch((function(e){return console.log(e)})).finally((function(){return v(!1)}))}),[t]);(0,i.useEffect)((function(){return t&&!m&&C(),function(){x([])}}),[C,m,t]);return k&&t?(0,a.jsx)(c.Z,{projectId:t,onClose:function(){C(),j&&w(null),Z(!1)},ticketId:j}):(0,a.jsxs)("div",{className:"relative h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex-initial flex flex-col lg:flex-row lg:items-end justify-between px-5 lg:px-0",children:[(0,a.jsx)("p",{className:"font-Oswald text-3xl font-thin uppercase leading-loose",children:"Recent Tickets"}),(0,a.jsxs)("div",{className:"flex flex-row self-start gap-x-2",children:[n&&(0,a.jsx)("button",{onClick:function(){return Z(!0)},className:"px-2 py-1 bg-slate-600 text-white",type:"button",children:(0,a.jsx)("p",{className:"font-Oswald text-lg font-thin uppercase",children:"Add Ticket"})}),(0,a.jsx)(l.rU,{className:"px-2 py-1 bg-slate-600 text-white",to:{pathname:"/tickets",search:"?projectId=".concat(t)},children:(0,a.jsx)("p",{className:"font-Oswald text-lg font-thin uppercase",children:"View Tickets"})})]})]}),(0,a.jsx)("div",{className:"px-5",children:f.length>0?(0,a.jsx)(o,{tickets:f,onActionSelected:function(e){w(e),Z(!0)}}):(0,a.jsx)("div",{className:"h-40 w-full flex items-center justify-center",children:(0,a.jsx)("p",{className:"font-Montserrat text-xl text-gray-400",children:"EMPTY"})})})]})}},3460:function(e,t,n){var r,i,l,s,c;n.d(t,{vH:function(){return r},mk:function(){return i},Bh:function(){return l},_8:function(){return s},$p:function(){return c}}),function(e){e[e.Persistent=0]="Persistent",e[e.Frequent=1]="Frequent",e[e.Random=2]="Random",e[e.Rare=3]="Rare"}(r||(r={})),function(e){e[e.New=0]="New",e[e.Assigned=1]="Assigned",e[e.Open=2]="Open",e[e.Fixed=3]="Fixed",e[e.Pending=4]="Pending",e[e.Retest=5]="Retest",e[e.Verified=6]="Verified",e[e.Reopen=7]="Reopen",e[e.Closed=8]="Closed",e[e.Duplicate=9]="Duplicate",e[e.Rejected=10]="Rejected",e[e.Deferred=11]="Deferred",e[e.NotBug=12]="NotBug"}(i||(i={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High",e[e.Urgent=3]="Urgent"}(l||(l={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High",e[e.Critical=3]="Critical"}(s||(s={})),function(e){e[e.Functional=0]="Functional",e[e.Performance=1]="Performance",e[e.Usability=2]="Usability",e[e.Compatibility=3]="Compatibility",e[e.Security=4]="Security"}(c||(c={}))},3705:function(e,t,n){n.d(t,{S:function(){return i}});var r=n(885);function i(e){for(var t=[],n=0,i=Object.entries(e);n<i.length;n++){var l=(0,r.Z)(i[n],2),s=l[0],c=l[1];Number.isNaN(Number(s))&&t.push({name:s,value:c})}return t}},7845:function(e,t,n){var r=n(2791);var i=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=i}}]);
//# sourceMappingURL=271.264a90eb.chunk.js.map